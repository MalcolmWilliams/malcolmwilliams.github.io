{% assign image_path = site.baseurl | append: "/processed_imgs/assets/" %}
{% assign image_path = image_path | append: {{include.prefix}} | append: "/" %}
{% assign imgs_split = include.imgs | split: "," %}

<style>
  .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: 10px;
  }

  .grid-item {
    display: flex;
    justify-content: center;
  }

  .grid-item img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
</style>
<div class="grid-container">
  {% for img in imgs_split %}
    {% capture srcset %}
      {{ image_path }}{{ img }}-320.jpg 320w,
      {{ image_path }}{{ img }}-640.jpg 640w,
      {{ image_path }}{{ img }}-1280.jpg 1280w,
      {{ image_path }}{{ img }}-1920.jpg 1920w
    {% endcapture %}
    {% capture webp_srcset %}
        {{ image_path }}{{ img }}-320.webp 320w,
        {{ image_path }}{{ img }}-640.webp 640w,
        {{ image_path }}{{ img }}-1280.webp 1280w,
        {{ image_path }}{{ img }}-1920.webp 1920w
    {% endcapture %}
    {% capture supports_webp %}
      {% if page.webp_support %} true {%endif %}
      {% endcapture %}
    {%
      assign final_srcset = supports_webp | json ==
      'true' ? webp_srcset : srcset
    %}
    <div class="grid-item">
      <style>
        figure {
          text-align: center;
        }
      </style>

      <figure>
        <a
          href="{{ image_path }}{{ img }}-1920.jpg"
          data-lightbox="default-gallery"
        >
          <img
            src="{{ image_path }}{{ img }}-320.jpg"
            srcset="{{final_srcset}}"
            sizes="(max-width: 600px) 320px,
                (max-width: 1024px) 640px,
                1024px"
            alt="{{include.caption}}"
          />
        </a>
      </figure>
    </div>
  {% endfor %}
</div>
